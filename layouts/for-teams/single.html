{{ define "preloads" }}
  <link rel="prefetch" href="{{ .Site.LanguagePrefix }}/hub/managed/">
  <link rel="prefetch" href="{{ .Site.LanguagePrefix }}/hub/self-hosted/">
{{ end }}
{{ define "main" }}
  <section class="flex items-center min-h-[66vh]">
    <header class="container flex items-center py-12 md:py-16 lg:py-20">
      <div class="hidden pr-6 md:block md:w-1/3 lg:w-2/5">
        <img data-src="/img/hub/group-magic.png" class="lazyload object-scale-down mx-auto lg:w-3/4" alt="{{ i18n "hub_header_group_magic_alt" . }}"/>
      </div>
      <div class="w-full md:w-2/3 lg:w-3/5">
        <div class="flex flex-wrap items-center gap-4 mb-4">
          <div class="flex items-center">
            <img src="/img/logo.svg" class="h-8 aspect-1110/942" alt="Logo"/>
            <span class="font-headline font-bold text-primary ml-2 pb-px">CRYPTOMATOR HUB</span>
          </div>
        </div>
        <h1 class="font-h1 mb-6">{{ i18n "hub_header_title" . | safeHTML }}</h1>
        <p class="lead mb-6">{{ i18n "hub_header_description" . | safeHTML }}</p>
        <div class="flex flex-col md:flex-row gap-6 mb-4">
          <div class="flex flex-col gap-2">
            <a href="{{ .Site.LanguagePrefix }}/book-a-demo/" role="button" class="btn btn-primary text-lg w-full md:w-64" data-umami-event="hub-header-demo-cta">{{ i18n "hub_header_demo_cta" . }}</a>
          </div>
          <div class="flex flex-col gap-2">
            <a href="{{ .Site.LanguagePrefix }}/contact-sales/" role="button" class="btn btn-outline-primary text-lg w-full md:w-64" data-umami-event="hub-header-contact-cta">{{ i18n "hub_header_contact_cta" . }}</a>
          </div>
        </div>
        <p class="font-p">{{ i18n "hub_header_cta_description" . | safeHTML }}</p>
      </div>
    </header>
  </section>

  <section class="container py-12">
    <header class="text-center">
      <h2 id="introduction" class="font-h2 mb-4">{{ i18n "hub_video_title" . }}</h2>
      <p class="font-p mb-4">{{ i18n "hub_video_description" . }}</p>
    </header>

    <div class="max-w-5xl mx-auto mb-12">
      <video controls preload="none" poster="https://static.cryptomator.org/hub/quick-introduction.png" class="w-full h-auto rounded-lg shadow-lg">
        <source src="https://static.cryptomator.org/hub/quick-introduction.mp4" type="video/mp4">
      </video>
    </div>    
  </section>

  <section class="container py-12">
    <div class="flex flex-wrap mb-24">
      <figure class="w-full mb-12 md:w-1/2 md:mb-0 md:pr-6">
        <img data-src="/img/hub/screenshot-1.png" class="lazyload w-full h-auto" alt="{{i18n "hub_workflow_step_1_alt" }}"/>
      </figure>
      <div class="w-full md:w-1/2 md:pl-6">
        <h2 class="font-h2 mb-6">{{ i18n "hub_workflow_step_1_title" }}</h2>
        <p class="lead">{{ i18n "hub_workflow_step_1_description" }}</p>
      </div>
    </div>
    
    <div class="flex flex-wrap mb-24 md:flex-row-reverse">
      <figure class="w-full mb-12 md:w-1/2 md:mb-0 md:pl-6">
        <img data-src="/img/hub/screenshot-2.png" class="lazyload w-full h-auto" alt="{{i18n "hub_workflow_step_2_alt" }}"/>
      </figure>
      <div class="w-full md:w-1/2 md:pr-6">
        <h2 class="font-h2 mb-6">{{ i18n "hub_workflow_step_2_title" }}</h2>
        <p class="lead">{{ i18n "hub_workflow_step_2_description" }}</p>
      </div>
    </div>
    
    <div class="flex flex-wrap">
      <figure class="w-full mb-12 md:w-1/2 md:mb-0 md:pr-6">
        <img data-src="/img/hub/screenshot-3.png" class="lazyload w-full h-auto" alt="{{i18n "hub_workflow_step_3_alt" }}"/>
      </figure>
      <div class="w-full md:w-1/2 md:pl-6">
        <h2 class="font-h2 mb-6">{{ i18n "hub_workflow_step_3_title" }}</h2>
        <p class="lead">{{ i18n "hub_workflow_step_3_description" }}</p>
      </div>
    </div>
  </section>

  <section class="container py-12">
    <header class="text-center">
      <h2 id="features" class="font-h2 mb-4">{{ i18n "hub_features_title" . }}</h2>
      <p class="font-p mb-4">{{ i18n "hub_features_subtitle" . }}</p>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
      <div class="white-box">
        <div class="px-4 py-2 border-b border-primary">
          <h3 class="font-h3"><i class="fa-solid fa-key text-primary"></i> {{ i18n "hub_features_feature_1_title" . }}</h3>
        </div>
        <div class="p-4">
          <p class="font-p">{{ i18n "hub_features_feature_1_description" . | safeHTML }}</p>
        </div>
      </div>
    
      <div class="white-box">
        <div class="px-4 py-2 border-b border-primary">
          <h3 class="font-h3"><i class="fa-solid fa-shield-check text-primary"></i> {{ i18n "hub_features_feature_2_title" . }}</h3>
        </div>
        <div class="p-4">
          <p class="font-p">{{ i18n "hub_features_feature_2_description" . | safeHTML }}</p>
        </div>
      </div>
    
      <div class="white-box">
        <div class="px-4 py-2 border-b border-primary">
          <h3 class="font-h3"><i class="fa-solid fa-lock-alt text-primary"></i> {{ i18n "hub_features_feature_3_title" . }}</h3>
        </div>
        <div class="p-4">
          <p class="font-p">{{ i18n "hub_features_feature_3_description" . | safeHTML }}</p>
        </div>
      </div>

      <div class="white-box">
        <div class="px-4 py-2 border-b border-primary">
          <h3 class="font-h3"><i class="fa-solid fa-cloud text-primary"></i> {{ i18n "hub_features_feature_4_title" . }}</h3>
        </div>
        <div class="p-4">
          <p class="font-p">{{ i18n "hub_features_feature_4_description" . | safeHTML }}</p>
        </div>
      </div>
    
      <div class="white-box">
        <div class="px-4 py-2 border-b border-primary">
          <h3 class="font-h3"><i class="fa-solid fa-code text-primary"></i> {{ i18n "hub_features_feature_5_title" . }}</h3>
        </div>
        <div class="p-4">
          <p class="font-p">{{ i18n "hub_features_feature_5_description" . | safeHTML }}</p>
        </div>
      </div>
    
      <div class="white-box">
        <div class="px-4 py-2 border-b border-primary">
          <h3 class="font-h3"><i class="fa-solid fa-shield-alt text-primary"></i> {{ i18n "hub_features_feature_6_title" . }}</h3>
        </div>
        <div class="p-4">
          <p class="font-p">{{ i18n "hub_features_feature_6_description" . | safeHTML }}</p>
        </div>
      </div>
    </div>
  </section>

  <section class="container text-center py-12">
    <div class="max-w-3xl mx-auto">
      <h2 id="pricing-plans" class="font-h2 mb-4">{{ i18n "hub_pricing_title" . }}</h2>
      <p class="font-p mb-4">{{ i18n "hub_pricing_description" . }}</p>
      <a href="{{ .Site.LanguagePrefix }}/pricing/#for-teams" role="button" class="btn btn-primary px-8" data-umami-event="hub-pricing">
        {{ i18n "hub_pricing_button" . }}
      </a>
    </div>
  </section>

  <section class="container py-12">
    <header class="text-center">
      <h2 id="faq" class="font-h2 mb-4">{{ i18n "faq_title" . }}</h2>
    </header>

    {{- $data := index $.Site.Data $.Site.Language.Lang }}
    <dl x-data="{isOpen: [{{ range $i, $e := $data.pricing_teams_faq }}{{ if $i }}, {{ end }}false{{ end }}]}" class="white-box divide-y divide-gray-200 max-w-3xl mx-auto">
      {{- range $index, $element := $data.pricing_teams_faq }}
      <dt class="font-p p-4">
        <a class="flex items-center" href="#" @click.prevent="isOpen[{{ $index }}] = !isOpen[{{ $index }}]">
          <i :class="{ 'fa-chevron-circle-right': !isOpen[{{ $index }}], 'fa-chevron-circle-down': isOpen[{{ $index }}] }" class="shrink-0 fa-solid text-gray-600 mr-2"></i>
          <span>{{ .Question }}</span>
        </a>
      </dt>
      <dd x-show="isOpen[{{ $index }}]" class="prose prose-sm md:prose max-w-none md:max-w-none p-4">
        {{ .Answer | markdownify }}
      </dd>
      {{- end }}
    </dl>
  </section>

  <section class="container text-center py-12">
    <h2 id="contact" class="font-h2 mb-4">{{ i18n "hub_contact_us_title" . }}</h2>
    <p class="font-p mb-4">{{ i18n "hub_contact_us_description" . | safeHTML }}</p>
    <a href="mailto:hub@cryptomator.org" role="button" class="btn btn-outline-primary px-8" data-umami-event="hub-contact-us">
      <i class="fa-solid fa-envelope"></i> {{ i18n "hub_contact_us_button" . }}
    </a>
  </section>

  <section x-data="{data: {email: '', listId: 7, acceptTerms: false, errorMessage: '', success: false, inProgress: false}}" class="container text-center pt-12 pb-24">
    <h2 id="newsletter" class="font-h2 mb-4">{{ i18n "hub_newsletter_title" . }}</h2>

    <form x-show="!data.success" x-ref="form" class="max-w-xl mx-auto mb-4">
      <p class="font-p mb-4">{{ i18n "hub_newsletter_instruction" . | safeHTML }}</p>
      <div class="flex justify-center items-center rounded-sm bg-gray-300 mb-4">
        <input x-model="data.email" x-ref="email" @blur="$refs.email.classList.add('show-invalid')" type="email" class="grow input-box rounded-r-none focus:border-secondary" placeholder="{{ i18n "hub_newsletter_email_placeholder" }}" required/>
        <button :disabled="data.inProgress || !data.acceptTerms" @click.prevent="new Newsletter($refs.form, data).subscribe()" type="submit" class="shrink-0 flex items-center gap-1 btn btn-primary rounded-l-none px-4" data-umami-event="hub-newsletter-form">
          <i :class="{'fa-envelope': !data.inProgress, 'fa-spinner fa-spin': data.inProgress}" class="fa-solid" aria-hidden="true"></i> {{ i18n "hub_newsletter_subscribe" }}
        </button>
      </div>
      <p class="font-p">{{ partial "checkbox.html" (dict "context" . "alpineVariable" "data.acceptTerms" "label" (i18n "accept_hub_newsletter_privacy" | safeHTML)) }}</p>
      <p :class="{'hidden': !data.errorMessage}" class="text-sm text-red-600 mt-2" x-text="data.errorMessage"></p>
    </form>

    <div x-show="data.success" class="mb-4" x-cloak>
      <p class="font-p mb-4">{{ ":love_letter:" | emojify }} {{ i18n "hub_newsletter_success" . }}</p>
    </div>

    <div class="flex justify-center gap-2">
      <a class="text-gray-600 hover:text-primary" href="https://mastodon.online/@cryptomator" aria-label="Cryptomator on Mastodon" target="_blank" rel="noopener" data-umami-event="hub-mastodon"><i class="fa-brands fa-mastodon text-2xl"></i></a>
      <a class="text-gray-600 hover:text-primary" href="https://www.linkedin.com/company/skymatic/" aria-label="Skymatic on LinkedIn" target="_blank" rel="noopener" data-umami-event="hub-linkedin"><i class="fa-brands fa-linkedin text-2xl"></i></a>
    </div>
  </section>
{{ end }}
{{ define "script" }}
  {{ if hugo.IsDevelopment }}
    {{ $newsletterJs := resources.Get "js/newsletter.js" }}
    <script type="text/javascript" src="{{ $newsletterJs.RelPermalink }}" defer></script>
  {{ else }}
    {{ $newsletterJs := resources.Get "js/newsletter.js" | minify | fingerprint }}
    <script type="text/javascript" src="{{ $newsletterJs.RelPermalink }}" integrity="{{ $newsletterJs.Data.Integrity }}" defer></script>
  {{ end }}
{{ end }}
